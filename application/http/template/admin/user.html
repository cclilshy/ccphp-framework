<!--
 * @Author: cclilshy cclilshy@163.com
 * @Date: 2023-03-02 11:12:34
 * @LastEditors: cclilshy cclilshy@163.com
 * @Description: My house
 * Copyright (c) 2023 by user email: cclilshy, All Rights Reserved.
-->
<!Doctype html>
<html>

<head>
    <title>用户列表</title>
    @embed('admin/common/head')@endembed
</head>

<body>
    <div class="im-content">
        <div class="layui-card">
            <div class="layui-card-header">用户管理</div>
            <div class="layui-card-body">
                <form class="layui-form layui-form-pane" action="">
                    <div class="layui-form-item">
                        <label class="layui-form-label">搜索项</label>
                        <div class="layui-inline">
                            <select name="search_key">
                                <option value=""></option>
                                <option value="username">用户名</option>
                                <option value="sex">性别</option>
                                <option value="email">邮箱</option>
                                <option value="birthday">生日</option>
                                <option value="brief">简介</option>
                            </select>
                        </div>
                        <div class="layui-inline">
                            <input type="text" name="search_value" placeholder="搜索值" autocomplete="off"
                                class="layui-input">
                        </div>

                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">时间范围</label>
                        <div class="layui-inline">
                            <input type="text" class="layui-input" id="register_time" placeholder="注册时间">
                        </div>
                        <div class="layui-inline">
                            <input type="text" class="layui-input" id="active_time" placeholder="最后活跃">
                        </div>
                        <div class="layui-inline">
                            <button class="layui-btn" lay-submit lay-filter="formDemo">搜索</button>
                        </div>
                    </div>
                    <template type="text/html" id="head_toolbar">
                        <div class="layui-btn-container">
                            <a class="layui-btn layui-btn-sm" onclick="add();">创建用户</a>
                        </div>
                    </template>
                    <teamlate type="text/html" id="cell_toolbar" style="display: none">
                        <a class="layui-btn layui-btn-xs" lay-event="detail">详细</a>
                        <a class="layui-btn layui-btn-xs" lay-event="edit">群组</a>
                        <a class="layui-btn layui-btn-xs" lay-event="edit">好友</a>
                        <a class="layui-btn layui-btn-xs" lay-event="edit">发言记录</a>
                        <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">封禁</a>
                        <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
                    </teamlate>

                    <table id="list" lay-filter="list"></table>

                </form>
            </div>
        </div>


        <script>
            //Demo
            layui.use('form', function () {
                var form = layui.form;

                //提交
                form.on('submit(formDemo)', function (data) {
                    layer.msg(JSON.stringify(data.field));
                    return false;
                });
            });
            function add() {
                layer.open({
                    type: 2,
                    content: "/admin/user/edit",
                    area: ['500px', '670px'],
                    title: "用户管理"
                });
            }
        </script>

    </div>
    <script>
        layui.use(['laydate', 'table'], function () {
            var table = layui.table;
            var laydate = layui.laydate;
            //第一个实例
            laydate.render({
                elem: '#register_time' //指定元素
                , type: 'datetime'
                , range: true
            });

            laydate.render({
                elem: '#active_time' //指定元素
                , type: 'datetime'
                , range: true
            });

            table.render({
                elem: '#list',
                height: 650,
                page: true,
                url: "/admin/user",
                toolbar: "#head_toolbar",
                cols: [[
                    { field: 'id', title: 'ID', width: 80, sort: true, fixed: 'left' },
                    {
                        field: 'nickname', title: '昵称', width: 100, templet: function (d) {
                            return '<img src="https://avatars.githubusercontent.com/u/59851383?s=40&v=4" style="width:24px">' +
                                ' <font style="color:red;">' + d.nickname + '</font>'
                        }
                    },
                    {
                        field: 'gender', title: '性别', width: 80, templet: function (d) {
                            if (d.gender === 0) {
                                return '女';
                            } else if (d.gender === 1) {
                                return '男';
                            }
                        }
                    },
                    { field: 'email', title: '邮箱', width: 200 },
                    { field: 'birthday', title: '生日', width: 120, sort: true },
                    { field: 'intro', title: '个人简介', width: 200 },
                    { field: 'create_time', title: '注册时间', width: 180, sort: true },
                    { field: 'update_time', title: '上次活跃', width: 180, sort: true },
                    { title: '操作', width: 400, templet: '#cell_toolbar' }
                ]]
            });
        });
    </script>
</body>

</html>